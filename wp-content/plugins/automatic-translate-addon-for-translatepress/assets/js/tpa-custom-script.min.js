const tpAutoTranslator=function(window,$){const configData=window.extradata,{ajax_url:ajaxUrl,nonce:nonce}=configData;var dict_id=new Array,gettxt_id=new Array;function onLoad(){var default_lang,pageLang=tpa_language_code($("#trp-language-select").find("option:first-child").val());localStorage.setItem("page_lang",pageLang);const widgetType="yandex";createStringsModal("yandex")}function initialize(){var default_lang=$("#trp-language-select").find("option:first-child").val(),getSelectedlang=$("#trp-language-select").val();0===$("#tpa-auto-btn").length&&addAutoTranslatepressBtn(default_lang,getSelectedlang),settingsModel(),$("#tpa-auto-btn").on("click",(function(){openSettingsModel()})),$("#tpa_yandex_transate_btn").on("click",(function(){onYandexTranslateClick()})),$(".save_it").on("click",onSaveClick)}function openSettingsModel(){$('#trp-string-categories optgroup option[data-group="String List"]').each((function(x,el){var data_group=$(this).attr("data-group"),database_id=$(this).attr("data-database-id"),id=$(this).attr("value"),person=database_id;dict_id[x]=database_id})),$('#trp-string-categories optgroup option[data-group="Gettext Strings"]').each((function(x,el){var data_group=$(this).attr("data-group"),database_id=$(this).attr("data-database-id"),id=$(this).attr("value"),person=database_id;gettxt_id[x]=database_id}));var getSelectedlang=$("#trp-language-select").val(),default_lang=$("#trp-language-select").find("option:first-child").val(),defaultLang=tpa_language_code(getSelectedlang);localStorage.setItem("language_code",defaultLang),localStorage.setItem("language_name",getSelectedlang),localStorage.setItem("default_language",default_lang),localStorage.setItem("dictionary_id",dict_id),localStorage.setItem("gettxt_id",gettxt_id),createPopup()}function addAutoTranslatepressBtn(default_lang,getSelectedlang){$("#trp-language-switch").before('<div><label class="tpa-steps">Step 1 - Select Language</label></div>'),$("#trp-next-previous").after('<div><label class="tpa-steps">Step 2 - Click Auto Translate Button</label></div><button id="tpa-auto-btn">Auto Translate</button><div class="tpa-user-message">Translate all plain strings of current page </div>'),$("#tpa-auto-btn").removeClass("is-enable"),$("#tpa-auto-btn").addClass("is-disable"),$("#tpa-auto-btn").attr("disabled",!0)}function enableAutotranslateButton(){var default_lang=$("#trp-language-select").find("option:first-child").val(),getSelectedlang=$("#trp-language-select").val(),isLoaderHidden="none"===$("#trp-preview-loader").css("display"),isAjaxLoaderHidden="none"==$("#trp-string-saved-ajax-loader").css("display"),newButtonState;default_lang!==getSelectedlang&&isLoaderHidden&&isAjaxLoaderHidden?($("#tpa-auto-btn").addClass("is-enable").removeClass("is-disable"),$("#tpa-auto-btn").attr("disabled",!1)):($("#tpa-auto-btn").addClass("is-disable").removeClass("is-enable"),$("#tpa-auto-btn").attr("disabled",!0))}function createPopup(){var style=$("#tpa-dialog").dialog({resizable:!1,height:"auto",width:400,modal:!0,buttons:{Cancel:function(){$(this).dialog("close")}}}).css("background-color","#E4D4D4")}function printStringsInPopup(jsonObj,type,group,idss){$(".notice-container.notice.inline.notice-warning").remove(),$("#ytWidget").show(),$(".string_container").show(),$(".choose-lang").show(),$(".save_it").show();var html="",totalTChars=0,index=1;if(jsonObj){for(const key in jsonObj)if(jsonObj.hasOwnProperty(key)){const groups=group[key],element=jsonObj[key];if(""!=element.source){if("yandex"==type)html+=`<tr id="${key}"><td>${index}</td><td  class="notranslate source" data-group= "${group[key]}" data-db-id =" ${idss[key]}">${element}</td>`;else{if(key>2500)break;html+=`<tr id="${key}"><td>${index}</td><td  class="notranslate source" data-group= "${group[key]}" data-db-id =" ${idss[key]}">${element}</td>`}html+="yandex"==type?`<td translate ="yes" class = "target translate">${element}</td></tr>`:'<td class ="target translate"></td></tr>',index++,totalTChars+=element.length}}$(".ytstats").each((function(){$(this).find(".totalChars").html(totalTChars)}))}"yandex"==type&&$("#yandex_string_tbl").html(html)}onLoad(),setInterval(enableAutotranslateButton,200);var gModal=document.getElementById("#tpa_strings_model");function onYandexTranslateClick(){$("html").attr("translate","no"),$(".save_it").prop("disabled",!0),$(".ytstats").css("display","none");var default_code=localStorage.getItem("language_code"),arr;["en","pl","af","jv","no","am","ar","az","ba","be","bg","bn","bs","ca","ceb","cs","cy","da","de","el","en","eo","es","et","eu","fa","fi","fr","ga","gd","gl","gu","he","hi","hr","ht","hu","hy","id","is","it","ja","jv","ka","kk","km","kn","ko","ky","la","lb","lo","lt","lv","mg","mhr","mi","mk","ml","mn","mr","mrj","ms","mt","my","ne","nl","no","pa","pap","pl","pt","ro","ru","si","sk","sl","sq","sr","su","sv","sw","ta","te","tg","th","tl","tr","tt","udm","uk","ur","uz","vi","xh","yi","zh"].includes(default_code)?($("#yandex_string_tbl").html('<tr>                               \n                            <td>\n                            <div class="ph-item">\n                            <div class="ph-col-12">\n                               <div class="ph-row">                                   \n                                   <div class="ph-col-6 big"></div>\n                                   <div class="ph-col-4  big"></div>\n                                   <div class="ph-col-2 big"></div>\n                                   <div class="ph-col-4"></div>\n                                   <div class="ph-col-8 "></div>\n                                   <div class="ph-col-6"></div>\n                                   <div class="ph-col-6 "></div>\n                                   <div class="ph-col-12"></div>                                 \n                               </div>\n                            </div>\n                            </div>\n                            </td>\n                            <td>\n                            <div class="ph-item">\n                            <div class="ph-col-12">\n                               <div class="ph-row">\n                                   <div class="ph-col-6 big"></div>\n                                   <div class="ph-col-4  big"></div>\n                                   <div class="ph-col-2 big"></div>\n                                   <div class="ph-col-4"></div>\n                                   <div class="ph-col-8 "></div>\n                                   <div class="ph-col-6"></div>\n                                   <div class="ph-col-6 "></div>\n                                   <div class="ph-col-12"></div>\n                               </div>\n                            </div>\n                            </div>\n                            </td>\n                            <td>\n                            <div class="ph-item">\n                            <div class="ph-col-12">\n                               <div class="ph-row">\n                                   <div class="ph-col-6 big"></div>\n                                   <div class="ph-col-4  big"></div>\n                                   <div class="ph-col-2 big"></div>\n                                   <div class="ph-col-4"></div>\n                                   <div class="ph-col-8 "></div>\n                                   <div class="ph-col-6"></div>\n                                   <div class="ph-col-6 "></div>\n                                   <div class="ph-col-12"></div>\n                               </div>\n                            </div>\n                            </div>\n                            </td>\n                            </tr>'),addStringsInModal()):($(".notice-container").addClass("notice inline notice-warning").html("Yandex Automatic Translator Does not support this language."),$(".string_container, .choose-lang, .save_it, .notice-info, .is-dismissible").hide(),$("#ytWidget").hide());var style1={};$("#tpa_yandex_transate_btn").css(style1),$("#tpa-dialog").dialog("close"),$("#tpa_strings_model").addClass("tpa_custom_model").fadeIn("slow")}function addStringsInModal(){var language_code=localStorage.getItem("language_name"),default_lang=localStorage.getItem("default_language"),current_page_db_id,gettxt_id,request_data={action:"tpa_get_strings",data:language_code,dictionary_id:localStorage.getItem("dictionary_id"),gettxt_id:localStorage.getItem("gettxt_id"),default_lang:default_lang,_ajax_nonce:nonce};$.ajax({type:"POST",url:ajaxUrl,dataType:"json",data:request_data,success:function(response){var plainStrArr=response,strings=new Array,group=new Array,idss=new Array,i=0;plainStrArr.forEach((function(entry){strings[i]=entry.strings,group[i]=entry.data_group,idss[i]=entry.database_ids,i++})),plainStrArr.length>0?printStringsInPopup(strings,type="yandex",group,idss):($("#ytWidget").hide(),$("#tpa_strings_model .notice-container").length>0?$(".notice-container").addClass("notice inline notice-warning").html("There is no plain string available for translations."):($(".modal-content").append("<div class='notice-container'></div>"),$(".notice-container").addClass("notice inline notice-warning").html("There is no plain string available for translations.")),$(".string_container, .choose-lang, .save_it, .notice-info, .is-dismissible").hide())}})}function onSaveClick(){var translatedObj=[];$("#stringTemplate tbody tr").each((function(index){var index=$(this).find("td.source").text(),source=$(this).find("td.source").text(),target=$(this).find("td.target").text(),type=$(this).find("td.source").data("group"),db_id=$(this).find("td.source").data("db-id"),language_code=localStorage.getItem("language_name"),default_lang=localStorage.getItem("default_language");translatedObj.push({original:source,translated:target,data_group:type,language_code:language_code,id:db_id,status:"2",default_lang:default_lang})}));var data={action:"tpa_save_translations",data:JSON.stringify(translatedObj),_ajax_nonce:nonce};jQuery.post(ajaxUrl,data,(function(response){$("#tpa_strings_model").fadeOut("slow"),location.reload()}))}function settingsModel(){let ytPreviewImg,gtPreviewImg;const getProLink="https://coolplugins.net/product/automatic-translate-addon-for-translatepress-pro/?utm_source=tpa_plugin&utm_medium=inside&utm_campaign=get_pro&utm_content=popup";let modelHTML=`\x3c!-- The Modal --\x3e\n        <div id="tpa-dialog" title="Step 3 - Select Translation Provider" >\n        <div class="tpa-settings" style="opacity:1;">\n        <strong class="tpa-heading" style="margin-bottom:10px;display:inline-block;">Translate Using Yandex Page Translate Widget</strong>\n        <div class="inputGroup">\n        <button id="tpa_yandex_transate_btn" class="notranslate button button-primary">Yandex Translate</button>\n        <span class="proonly-button alsofree">✔ Available</span>\n        <br/><a href="https://translate.yandex.com/" target="_blank"><img style="margin-top: 5px;" src="${extradata.yt_preview}" alt="powered by Yandex Translate Widget"></a>\n        </div>\n        <hr/>\n      <strong class="tpa-heading" style="margin-bottom:10px;display:inline-block;">Translate Using Google Page Translate Widget</strong>\n        <div class="inputGroup">\n        <button id="tpa_gtranslate_btn" disabled="disabled" class="notranslate button button-primary">Google Translate</button>\n        <span class="proonly-button"><a href="${getProLink}" target="_blank" title="Buy Pro">💎 Buy Pro</a></span>\n        <br/><a href="https://translate.google.com/" target="_blank"><img style="margin-top: 5px;" src="${extradata.gt_preview}" alt="powered by Google Translate Widget"></a>\n        </div>\n        <hr/>\n        <ul class="tpa-feature" style="margin: 0;">\n          <li><span style="color:green">✔</span> Unlimited Translations<br/></li>\n          <li><span style="color:green">✔</span> No API Key Required</li>\n          <li><span style="color:green">✔</span> Check Languages Support - <a href="https://yandex.com/support/translate/supported-langs.html" target="_blank">Yandex</a>, <a href="https://en.wikipedia.org/wiki/Google_Translate#Supported_languages" target="_blank">Google</a></li>\n        </ul>\n          </div>\n          </div>`;$("body").append(modelHTML)}function createStringsModal(widgetType){let{wrapperCls:wrapperCls,headerCls:headerCls,bodyCls:bodyCls,footerCls:footerCls}=getWidgetClasses("yandex"),modelHTML=`\n        <div id="tpa_strings_model" class="modal tpa_custom_model ${wrapperCls}">\n                <div class="modal-content">\n                    <input type="hidden" id="project_id"> \n                    ${modelHeaderHTML(widgetType,headerCls)}   \n                    ${modelBodyHTML(widgetType,bodyCls)}   \n                    ${modelFooterHTML(widgetType,footerCls)}   \n            </div></div>`;$("body").append(modelHTML)}function getWidgetClasses(widgetType){let wrapperCls="",headerCls="",bodyCls="",footerCls="";switch(widgetType){case"yandex":default:wrapperCls="yandex-widget-container",headerCls="yandex-widget-header",bodyCls="yandex-widget-body",footerCls="yandex-widget-footer"}return{wrapperCls:wrapperCls,headerCls:headerCls,bodyCls:bodyCls,footerCls:footerCls}}function modelHeaderHTML(widgetType,headerCls){const HTML=`\n        <div class="modal-header  ${headerCls}">\n                        <span class="close">&times;</span>\n                        <h2 class="notranslate">Step 4 - Start Automatic Translation Process</h2>\n                        <div class="save_btn_cont">\n                <button class="notranslate save_it button button-primary" disabled="true">Merge Translation</button>\n                </div>\n                <div style="display:none" class="ytstats hidden">\n                Wahooo! You have saved your valauble time via auto translating \n                 <strong class="totalChars"> </strong> characters  using \n                  <strong> \n                  <a href="https://wordpress.org/support/plugin/automatic-translate-addon-for-translatepress/reviews/#new-post" target="_new">\n                  Automatic Translate Addon For TranslatePress</a>\n                </strong>     \n              </div>\n                    </div>\n                    <div class="notice inline notice-info is-dismissible">\n                    <div class="tpa_notice_container">\n                    Machine translations are not 100% correct. Please verify strings before using on production website.\n                    <br/>Also Google Translate provides better machine translations than Yandex. <a href="https://coolplugins.net/product/automatic-translate-addon-for-translatepress-pro/?utm_source=tpa_plugin&utm_medium=inside&utm_campaign=get_pro&utm_content=popup" target="_blank">Pro version</a> provides unlimited translations via Google Page Translate Widget.\n                    </div>\n                    <button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>\n                    </div>`;return HTML}function modelBodyHTML(widgetType,bodyCls){const HTML=`\n        <div class="modal-body  ${bodyCls}">\n        <div class="my_translate_progress">Automatic translation is in progress....<br/>It will take few minutes, enjoy ☕ coffee in this time!<br/><br/>Please do not leave this window or browser tab while translation is in progress...</div>\n            ${translatorWidget(widgetType)}\n            <div class="string_container">\n                <table class="scrolldown" id="stringTemplate">\n                    <thead>\n                        <th class="notranslate">S.No</th>\n                        <th class="notranslate">Source Text</th>\n                        <th class="notranslate">Translation</th>\n                    </thead>\n                    <tbody id="yandex_string_tbl">\n                    </tbody>\n                </table>\n            </div>\n            <div class="notice-container"></div>\n        </div>`;return HTML}function modelFooterHTML(widgetType,footerCls){const HTML=` <div class="modal-footer ${footerCls}">\n        <div class="save_btn_cont">\n                <button class="notranslate save_it button button-primary" disabled="true">Merge Translation</button>\n                </div>\n                <div style="display:none" class="ytstats">\n                Wahooo! You have saved your valauble time via auto translating \n                   <strong class="totalChars"></strong> characters  using \n                    <strong> \n                    <a href="https://wordpress.org/support/plugin/automatic-translate-addon-for-translatepress/reviews/#new-post" target="_new">\n                    Automatic Translate Addon For TranslatePress</a>\n                  </strong>     \n                </div>\n    </div>`;return HTML}function translatorWidget(widgetType){if("yandex"===widgetType){const widgetPlaceholder='<div id="ytWidget">..Loading</div>';return`\n            <div class="translator-widget">\n            <h3 class="choose-lang">Choose language <span class="dashicons-before dashicons-translation"></span></h3>\n                ${widgetPlaceholder}\n            </div>`}return""}function tpa_language_code(getSelectedlang){var response=getSelectedlang.substring(0,3),default_code="",sbstr=getSelectedlang.substring(0,3);return default_code="nb_"==sbstr?"no":"azb"==sbstr?"azb":"arg"==sbstr?"arg":getSelectedlang.substring(0,2)}$(window).click((function(event){event.target==gModal&&(gModal.style.display="none")})),$("#tpa_strings_model").find(".notice-dismiss").on("click",(function(){$(".notice.inline.notice-info.is-dismissible").fadeOut("slow")})),$("#tpa_strings_model").find(".close").on("click",(function(){$("#tpa_strings_model").fadeOut("slow"),location.reload(!0)})),$(document).ready((function(){initialize()}))}(window,jQuery);